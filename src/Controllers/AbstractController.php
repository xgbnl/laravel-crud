<?php

namespace Xgbnl\Business\Controllers;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Xgbnl\Business\Service\Service;
use Xgbnl\Business\Repository\Repository;
use Xgbnl\Business\Traits\BusinessHelpers;

/**
 * @property Repository $repository
 * @property Service $service
 */
abstract class AbstractController extends Controller
{
    use BusinessHelpers;

    protected ?Request $request = null;

    public function callAction($method, $parameters)
    {
        $injected = false;

        foreach ($parameters as $p) {
            if ($p instanceof Request) {
                $this->request = $p;
                $injected      = true;
            }
        }

        if (!$injected) {
            $this->request = \request();
        }

        return parent::callAction($method, $parameters); // TODO: Change the autogenerated stub
    }
}
